<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8" />
    <title>$.grepで条件に会う要素を探す</title>
    <script src="../lib/jquery-1.11.1.min.js"></script>
  </head>
  <body>
    <script>// <![CDATA[
      // 数値を要素とする配列
      var ary = [1, 3, 5];
      var ra = $.grep(ary, function(elem, idx){
        return elem > 2;
      });
      console.log(ra);  // [3, 5]
      // console.log(ra instanceof Array); // true
      // console.log(ra instanceof Object); // true

      // 文字列を要素とする配列
      var str = ['jQuery', 'jQuery UI', 'JavaScript'];
      var rs = $.grep(str, function(elem, idx){
        return /jQuery/.test(elem);
      }, true); // 第3引数がtrueのときは、戻り値がtrueでない要素が抽出される
      console.log(rs);  // [JavaScript']

      // オブジェクトを要素とする配列
      var obja = [{name: 'jQuery'}, {name: 'jQuery UI'}, {name: 'JavaScript'}];
      var ro = $.grep(obja, function(elem, idx){
        return /jQuery/.test(elem.name);
      });
      console.log(ro);  // [{name: 'jQuery'}, {name: 'jQuery UI'}]

      // DOMオブジェクトの集合（配列ではない）
      var tags = document.getElementsByTagName('*');
      var rt = $.grep(tags, function(elem, idx){
        return document.body === elem;
      });
      console.log(rt);  // [body]

    // ]]></script>
  </body>
</html>
