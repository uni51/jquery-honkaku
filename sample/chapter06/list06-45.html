<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8" />
    <title>複数のアニメーションがすべて終了した後にdoneで登録した処理を実行</title>
    <script src="../lib/jquery-1.11.1.min.js"></script>
  </head>
  <body>
    <script>// <![CDATA[
      // 2つの<div>をHTML文書に追加(表示しない)
      $.each(['red', 'blue'], function(i, name) {
        $('<div>', {width: 100, height: 100, css: {backgroundColor: name,
          color: 'white', fontWeight: 'bold'}}).appendTo(document.body).hide();
      });

      // それぞれの<div>は異なる時間をかけて表示され、
      // 両方の表示が完了したら、各要素にテキストを追加
      $.when($('div:first').show(3000), $('div:last').show(300))
       .done(function() { $('div').text('jQuery'); });
    // ]]></script>
  </body>
</html>
