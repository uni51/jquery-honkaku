<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8" />
    <title>JSONPのテスト</title>
    <script src="../lib/jquery-1.11.1.min.js"></script>
    <script>// <![CDATA[
      // JSONPによって実行される関数
      function calc(data) {
        var t = data.a + ' + ' + data.b + ' = ' + (data.a + data.b);
        $('<div>', {text: t}).appendTo(document.body);
      }

      jQuery(function($) {
        var a = 5, b = 3,         // 関数calcで利用する値
            callback = 'calc';    // 実行する関数の名称
        // URLの末尾に付加するパラメータ
        var params = '?a=' + a + '&b=' + b + '&callback=' + callback;
        // script要素を生成・追加(JSONP実行)
        $('<script>', {src: 'jsonpcallback.php' + params})
          .appendTo(document.head);
      });
    // ]]></script>
  </head>
  <body>
    <!-- 実行結果はここに生成される -->
  </body>
</html>
